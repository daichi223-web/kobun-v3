const fs = require('fs');
const path = 'app/data/texts/chigo-no-sorane.json';
const d = JSON.parse(fs.readFileSync(path, 'utf-8'));

const hints = {
  // Layer 1: 用言の重要ポイント
  's1-t13': 'サ変「す」: 古文で最重要の変格活用。「せ・し・す・する・すれ・せよ」。「す」と「おはす」のみ。',
  's1-t17': '四段活用: 最も多い活用型。「ず」を付けて「言は（ず）」→ア段＝四段と判定。',
  's2-t6': '四段活用: 「聞か（ず）」→ア段＝四段。カ行四段。',
  's3-t10': '下二段「寝（ぬ）」: 語幹がなく一文字。「寝（ね）・寝（ね）・寝（ぬ）・寝る（ぬる）・寝れ（ぬれ）・寝よ（ねよ）」。',
  's3-t15': 'ク活用形容詞: 「わろし」→連用形「わろかり」。ラ変型活用語尾「〜かり」が付く。',
  's4-t7': '下二段「いらふ」: 「いらへ（ず）」→エ段＝下二段。ハ行下二段。',
  's4-t13': '下二段「寝」: 一文字動詞。「寝（ね）ず」→エ段＝下二段。',
  's5-t7': '四段「おどろく」:「目を覚ます」の意。現代語と意味が異なる古文重要語。',
  's6-t1': 'シク活用形容詞: 「うれし」→終止形が「〜し」。「うれしく・うれしく・うれし・うれしき・うれしけれ」。',
  's6-t10': '下二段「いらふ」:「返事をする」の意。繰り返し登場する重要語。',
  's7-t6': '下二段「いらふ」: 未然形「いらへ（ず）」→エ段で下二段と判定。',
  's8-t9': 'ク活用形容詞: 「幼し」→連体形「幼き」。「〜き」は連体形の目印。',
  's8-t21': 'サ変「す」: 連用形「し」。「〜のしければ」で「〜したので」の意。',
  's9-t3': 'シク活用形容詞:「わびし」＝つらい・情けない。頻出の心情語。',
  's10-t10': 'サ変「す」: 連用形「し」。「音のしければ」。',
  's10-t26': '下二段「いらふ」: 連用形「いらへ」。',

  // Layer 2: 助動詞の識別ポイント
  's1-t14': '「む」意志: 主語が一人称（僧たち自身）→「〜しよう」。「いざ」が意志の手がかり。',
  's1-t18': '「けり」過去: 地の文で事実を述べる→過去「〜した」。詠嘆ではない。',
  's2-t7': '「けり」過去: 地の文の叙述→過去。「聞きけり」＝聞いていた。',
  's3-t6': '「む」婉曲: 連体形で体言に接続→婉曲「〜するような」。「し出ださむを」の「を」に注目。',
  's3-t11': '「ず」打消: 未然形接続。「寝ざらむ」＝寝ないだろう。ザリ活用「ざら」に注意。',
  's3-t12': '「む」推量: 「寝ざらむ」→打消推量「〜ないだろう」。',
  's3-t16': '「ぬ」強意: 「なむ」＝「ぬ」未然形＋「む」→強意＋推量「きっと〜だろう」。',
  's3-t17': '「む」推量: 「なむ」の「む」→推量。「わろかりなむ」＝みっともないだろう。',
  's4-t3': '「る」受身: 「よばれたらば」→「呼ばれたら」。四段未然形に接続→受身。',
  's4-t8': '「む」意志: 主語が一人称（児自身）→意志「返事をしよう」。',
  's4-t14': '「たり」存続: 「寝たるに」＝寝ている状態で。完了ではなく存続。',
  's5-t5': '「む」丁寧な意志: 「さぶらはむ」＝申し上げましょう。謙譲＋意志。',
  's5-t8': '「す」尊敬: 「おどろかせたまへ」→尊敬の助動詞＋尊敬の補助動詞。二重尊敬。',
  's6-t11': '「む」仮定: 「いらへむも」→仮定「返事をするとしても」。連体形＋「も」。',
  's6-t15': '「けり」過去: 「待ちけるか」＝待っていたのか。過去の事実。',
  's7-t4': '「る」受身: 「よばれて」＝呼ばれて。受身用法。',
  's7-t7': '「む」意志: 「いらへむとて」→「返事をしようとして」。意志。',
  's7-t11': '「たり」存続: 「寝たるに」→「寝ている状態なのに」。',
  's8-t14': '「ぬ」完了: 「寝入りたまひにけり」＝お眠りになってしまった。完了の「ぬ」。',
  's8-t15': '「けり」詠嘆: 伝聞的ニュアンス。「〜してしまったよ」。',
  's10-t27': '「たり」完了: 「いらへたりければ」＝返事をしたところ。完了。',
  's10-t28': '「けり」過去: 「いらへたりければ」→已然形＋「ば」で確定条件。',
};

d.sentences.forEach(s => {
  s.tokens.forEach(t => {
    if (hints[t.id]) {
      t.hint = hints[t.id];
    }
  });
});

fs.writeFileSync(path, JSON.stringify(d, null, 2) + '\n', 'utf-8');
console.log('Added hints to ' + Object.keys(hints).length + ' tokens.');
